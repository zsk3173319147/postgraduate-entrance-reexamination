### 概述
- CIA三元组

  - 机密性
  - 完整性
  - 可用性

- 密码学中的五元组

  - 明文
  - 密文
  - 密匙
  - 加密算法
  - 解密算法

- 对称加密(DES、AES)

  加密密匙和解密密匙相同，或者实质上等同，一个可以推另一个

- 非对称加密(RSA)

  需要一对密钥，公钥加密，对应的私钥解密



### 局域网协议

- ARP协议

  可能存在的隐患：

  - ARP高速缓存动态更新
  - ARP的请求广播
  - ARP的应答无需认证

  攻击防范：

  - AM访问管理的配置
  - 实行动态ARP监控

- DHCP协议

  可能存在的问题：

  - Server冒充
  - 耗竭攻击

- 局域网链路层的安全问题

  - CAM表溢出

    交换机CAM表格存放MAC地址和VLAN端口信息的映射，满了之后新内容覆盖旧内容

    攻击者向交换机发送大量无效的MAC地址

    查不到有效的端口号，交换机会向所有的端口发送传输进来的信息，会导致信息的泄露

  - VLAN中继攻击

    修改VLAN的ID标签，被动打开交换机的Trunk功能，达到访问其他VLAN系统的目的

    采用PVLAN技术，使同一VLAN下的主机隔离

    

    

### 广域网协议



- PPP点对点协议

  - 工作原理：
    - 创建链路，客户机和远程服务器通过LCP协议发送信息配置报文，选择验证协议
    - 用户验证，客户端将身份信息发送给服务器进行验证
  - PPP协议提供两种认证方式
    - 口令验证协议(PAP)
      - 认证简单，被认证方向认证方发送认证请求包含用户名和口令，认证方接收到请求，根据验证结果返回确认和否认包
      - 若身份合法，认证过程结束，否则重复直至超时
    - 挑战握手认证协议(CHAP)
      - 认证方向被认证方发送CHAP询问包，包含标志符和一段随机码challenge
      - 被认证方根据challenge对口令进行哈希计算，得到响应值并把响应包发送给认证方

- PPPoE协议

  利用以太网提供多个用户主机接入功能，并且能够提供数据传输的计费数据，广泛运用于介入运营商网络
  
  PPPoE（Point-to-Point Protocol over Ethernet）是一种在以太网上传输PPP协议的一种封装协议，用于在宽带接入中充当用户与ISP之间的连接协议。在ADSL、FTTH等网络接入技术中被广泛使用。
  
  下面是PPPoE协议的一些基本概念：
  
  - Access Concentrator（AC）：即接入聚合器，是网络服务提供商（ISP）端的设备，负责处理用户的PPPoE连接请求，对用户进行认证和授权。
  - PPPoE客户端：即用户设备，使用PPPoE协议与AC建立连接。
  - Session：PPPoE连接建立成功后，将建立一个session来完成双方的认证、授权和网络参数分配等工作，随后会根据协商的参数完成双方的数据传输。
  
  PPPoE协议的工作流程如下：
  
  1. PPPoE客户端向AC发起连接请求（PPPoE Discovery）
  2. AC向客户端返回连接请求确认（PPPoE Discovery Offer）
  3. 客户端向AC发送认证信息（PPPoE Session）
  4. AC完成认证，向客户端发送连接确认信息（PPPoE Session Confirmation）
  5. PPPoE连接建立成功，开始传输数据
  
  在PPPoE连接建立成功后，客户端就可以向ISP发起数据请求，接收到ISP返回的数据。同时，ISP也可以通过连接来分配给客户端一个动态的IP地址、网关、DNS服务器等网络参数。
  
  总之，PPPoE协议可以提供安全可靠的宽带连接，允许用户使用自己的网络设备连接到Internet，并提供带宽和网络参数分配等服务。







### 无线局域网

- WEP协议

  WEP (Wired Equivalent Privacy) 是一种早期的无线网络安全协议，目的是为了提供与有线网络等价的保护。它使用 RC4 算法对数据进行加密，并使用 CRC32 校验和保证数据的完整性。

  WEP协议的加密流程如下：

  1. 将数据通过伪随机数生成器产生的密钥流进行加密。
  2. 添加 ICV (Integrity Check Value) 校验和，用于校验数据的完整性。
  3. 将加密后的数据和校验和一起传输。

  WEP协议存在的安全问题主要有两个：

  1. 容易受到重放攻击。攻击者可以截获WEP加密的数据包，然后将数据包重新发送给目标接收者，这样就可以绕过WEP的加密措施。
  2. 密钥弱化。WEP协议使用的密钥只有40位或104位，可以很容易地被破解。

  因此，WEP已经不再被推荐使用，并已经被更加安全的协议如WPA和WPA2所取代。

- RSN(健壮安全网络) 只允许特定的安全节点接入网络，只工作在整个网络的无线部分

  - 工作流程
    - 阶段1，STA发现AP
    - 阶段二，STA与服务器之间认证，
    - 阶段三，密匙的生成与分配
    - 阶段四，加密数据传输
    - 阶段五，连接终止

  

- WPA协议

  WPA（Wi-Fi Protected Access）是Wi-Fi网络中广泛使用的一种安全协议。WPA基于802.11i协议，但比802.11i更早地开发出来。WPA解决了WEP中存在的漏洞，并提供了更强大的加密和认证机制。
  
  WPA协议包括以下两个部分：
  
  1. 认证和密钥管理：WPA使用802.1X认证协议，这是一种基于端口的网络访问控制协议，它使用EAP（Extensible Authentication Protocol）进行认证。在802.1X认证过程中，客户端和访问点使用EAP协议进行通信，以实现身份验证和密钥分发。WPA使用TKIP（Temporal Key Integrity Protocol）协议生成动态WEP密钥，以增强数据保护。
  2. 加密：WPA使用RC4加密算法，以保护数据的机密性。WPA的加密强度比WEP更强，因为WPA使用TKIP对数据进行加密，并使用消息完整性校验（MIC）技术来检测数据是否被篡改。
  
  总的来说，WPA提供了比WEP更好的安全性，因为它使用更强大的加密和认证机制。WPA使用802.1X认证协议来实现身份验证和密钥管理，使用TKIP协议生成动态WEP密钥来增强数据保护，并使用RC4加密算法以保护数据的机密性。



### 网络层攻击与防御



- #### IPSec技术 (为IP网络提供安全性的协议和服务的集合，它是VPN（Virtual Private Network，虚拟专用网）中常用的一种技术)

  采用端到端加密模式，传输过程的中间报文以密文传输

  - ipsec的主要组成：

    - SA：协商安全联盟
    - IKE协议：对IP报文进行认证、完整性校验、数据加密
    - ESP协议：对ip报文进行认证、完整性校验、数据加密
    - AH协议：对ip报文进行数据源认证、完整性校验

  - ipsec的工作阶段

    - 识别“感兴趣流”
    - 协商安全联盟
    - 数据传输
    - 隧道拆除

  - AH协议

    - AH是一种基于IP的传输层协议，协议号为51。
    - 只能支持认证 ，不支持加密 。
    - 对整个头部进行认证。
    - 工作原理是在每一个数据包的标准IP报头后面添加一个AH报文头

  - ESP协议

    ESP是一种基于IP的传输层协议，**协议号为50**。其工作原理是在每一个数据包的标准IP报头后面添加一个ESP报文头，并在数据包后面追加一个ESP尾（ESP Tail和ESP Auth data）。与AH不同的是，ESP将数据中的有效载荷进行加密后再封装到数据包中，以保证数据的机密性，但ESP没有对IP头的内容进行保护。
    
    IPSec（Internet Protocol Security）是一种用于在IP网络上进行加密和身份验证的协议。它提供了网络层安全性，可以保护整个通信链路，从而提供了更高级别的安全性。IPSec可用于在虚拟专用网络（VPN）上创建加密隧道，以保护远程工作者和分支机构之间的通信。
    
    - IPSec通常由两个协议组成：安全性协议（AH）和封装安全性负载的协议（ESP）。
    
    - AH协议：AH协议在传输层上提供数据完整性，身份验证和反重放攻击保护，但不提供加密。它可以确保报文不被篡改，因为在数据包的传输过程中，每个数据包都会带上AH的数字签名，接收方会验证这个签名以确保数据的完整性和来源的真实性。
    - ESP协议：ESP协议在传输层上提供数据加密，数据完整性，身份验证和反重放攻击保护。它通过使用对称密钥加密报文，保证数据在传输过程中不会被窃听、篡改或者伪造。同样地，ESP也会提供身份验证和反重放攻击保护，以确保数据的完整性和来源的真实性。
    
    IPSec可以在两种模式下工作：
    
    - 传输模式：在传输模式下，只有数据包中的有效负载受到加密和身份验证的保护，因此仅对原始IP头中的源地址和目标地址进行验证和保护。
    - 隧道模式：在隧道模式下，整个IP数据报都受到加密和身份验证的保护。隧道模式可用于建立VPN连接，通过Internet连接多个私有网络。在这种情况下，隧道的两端各有一个安全网关，它们负责加密和解密数据。
    
    IPSec的优点包括：
    
    - 可用于广泛的应用程序和操作系统。
    - 提供了完整的数据传输保护。
    - 可用于远程访问和站点到站点连接。
    
    IPSec的缺点包括：
    
    - 配置复杂，需要密钥管理和证书管理。
    - 可能会降低网络性能，因为对数据包进行加密和解密需要更多的处理时间。
    - 可能会对网络设备造成负担，因为它需要支持足够的处理速度和内存以处理额外的加密和解密功能。

### SSL协议



SSL/TLS协议的基本思路是采用[公钥加密法](https://en.wikipedia.org/wiki/Public-key_cryptography)，也就是说，客户端先向服务器端索要公钥，然后用公钥加密信息，服务器收到密文后，用自己的私钥解密。

- SSL/TLS协议的基本过程

（1） 客户端向服务器端索要并验证公钥。

（2） 双方协商生成"对话密钥"。

（3） 双方采用"对话密钥"进行加密通信。

- SSL协议通过数字证书进行身份验证

  数字证书是由数字中心颁发的，已经被认证中心数字签名的，包含有公开密匙者相关信息的文件

  - 数字证书的使用流程(一般由数字中心、认证方、被认证方组成)：
    - 首先 CA 会把持有者的公钥、用途、颁发者、有效时间等信息打成一个包，然后对这些信息进行 Hash 计算，得到一个 Hash 值；
    - 然后 CA 会使用自己的私钥将该 Hash 值加密，生成 Certificate Signature，也就是 CA 对证书做了签名；
    - 最后将 Certificate Signature 添加在文件证书上，形成数字证书；
    - 首先客户端会使用同样的 Hash 算法获取该证书的 Hash 值 H1；
    - 通常浏览器和操作系统中集成了 CA 的公钥信息，浏览器收到证书后可以使用 CA 的公钥解密 Certificate Signature 内容，得到一个 Hash 值 H2 ；
    - 最后比较 H1 和 H2，如果值相同，则为可信赖的证书，否则则认为证书不可信。



### VPN



- virtual private network

  VPN即虚拟专用网，指通过VPN技术在**公有网络**中构建**专用**的**虚拟**网络

- VPN优点

  - 安全：在远端用户、驻外机构、合作伙伴、供应商与公司总部之间建立可靠的连接，保证数据传输的安全性。这对于实现电子商务或金融网络与通讯网络的融合特别重要。
  - 成本低：利用公共网络进行信息通讯，企业可以用更低的成本连接远程办事机构、出差人员和业务伙伴。
  - 支持移动业务：支持出差VPN用户在任何时间、任何地点的移动接入，能够满足不断增长的移动业务需求。
  - 可扩展性：由于VPN为逻辑上的网络，物理网络中增加或修改节点，不影响VPN的部署

- vpn的分类

  1、根据VPN建设单位不同进行划分

  - 运营商的专线网络大多数都是使用的MPLS VPN；
  - 企业自己基于Internet自建vpn网络，常见的如IPsec VPN、GRE VPN、L2TP VPN。

  2、根据组网方式进行划分

  - 这种方式适用于出差员工拨号接入VPN的方式，员工可以在只要有Internet的地方都可以通过VPN接入访问内网资源。

    最常见的就是SSL VPN、L2TP VPN。

  


- vpn的关键技术
  - 1、隧道技术
  - 2、身份认证、数据加密、数据验证

  

- SSLVPN和IPSecVPN区别：

  ![](https://fortinet-public.s3.cn-north-1.amazonaws.com.cn/Handbook_Of_FortiGate_Products/HTML/91c009a3_1cda040b_0.jpg)

  



### 可能会问到的问题

- #### 网络安全协议是什么？你从中学到了什么？

  > 网络安全协议是指在网络通信中，用于保证数据传输安全、完整和可靠的一系列协议。其目的是保障数据在传输过程中不被篡改、窃听或伪造，从而保证数据的机密性、完整性和可用性。
  >
  > 在网络安全协议这门课中，了解网络通信中常用的安全协议，包括加密协议、认证协议、安全传输协议等等。同时，还学习了如何使用这些协议来保障网络通信的安全性，如何应对网络攻击和威胁，以及如何设计和实现安全的网络应用。

- #### SSL/TLS协议是什么？它是如何保证网络通信的安全性的？

  > SSL/TLS协议是一种用于保证网络通信安全性的加密协议，全称为Secure Sockets Layer/Transport Layer Security。
  >
  > SSL/TLS协议通过在传输层与应用层之间建立一个安全的通信通道，来保证数据的机密性、完整性和可靠性。具体来说，它通过以下几个步骤来实现网络通信的安全性：
  >
  > 1. 握手阶段（Handshake）：客户端与服务器之间进行协商，确定加密算法、密钥交换方式和数字证书等信息。
  > 2. 认证阶段（Authentication）：服务器向客户端提供数字证书，客户端验证服务器的身份是否合法。
  > 3. 密钥交换阶段（Key Exchange）：客户端与服务器协商确定对称密钥，用于后续的加密和解密操作。
  > 4. 加密阶段（Encryption）：客户端和服务器使用协商好的对称密钥进行数据加密，保证数据在传输过程中的机密性。
  > 5. 数据完整性校验阶段（Integrity Check）：客户端和服务器使用消息认证码（MAC）或哈希算法来验证数据在传输过程中是否被篡改。
  >
  > SSL/TLS协议的安全性建立在数字证书和对称密钥的保护上。数字证书使用公钥加密算法进行加密，防止被篡改或伪造；对称密钥只在握手阶段交换，之后的通信都是基于这个密钥进行加密和解密，保证了数据在传输过程中的机密性。
  >
  > SSL/TLS协议广泛应用于Web浏览器和服务器之间的通信、电子邮件、文件传输等通信场景，是保障网络通信安全的重要组成部分。

- #### IPsec协议是什么？它是如何保证网络通信的机密性和完整性的？

  > IPsec是一种网络安全协议，用于保护IP数据包的机密性和完整性。它通过在传输层和网络层之间添加安全层来实现数据包的加密和解密，以及验证数据包的来源和完整性。IPsec协议主要有两种模式：传输模式和隧道模式。
  >
  > 在传输模式下，IPsec只对IP数据包中的负载（即传输层协议中的数据）进行加密和解密，IP数据包的头部信息不进行加密。这种模式适用于在两个网络设备之间的点对点通信中使用。
  >
  > 在隧道模式下，IPsec对整个IP数据包进行加密和解密，并在原始数据包的基础上添加一个新的IP头。这种模式适用于在两个网络之间进行通信时使用，例如VPN连接。
  >
  > IPsec协议通过使用对称加密和公钥加密算法来实现机密性和完整性。加密算法可以保护数据的机密性，防止未经授权的访问和窃听。完整性算法可以保证数据的完整性，防止数据被篡改或伪造。IPsec还使用数字证书来验证通信双方的身份，以确保通信双方的合法性和安全性。
  >
  > 总的来说，IPsec协议是一种重要的网络安全协议，可以为网络通信提供强大的保护机制，保护数据的机密性和完整性，防止未经授权的访问和攻击。

  

   

